# 1. 评分卡标准格式

![image-20200208121518374](https://tva1.sinaimg.cn/large/0082zybpgy1gbp0coynt6j30zk0m6wgs.jpg)



评分卡标准格式包括「变量」、「类别」以及对应的「分值」。

而一个样本进来以后，最终的得分其实是各个类别下对应的分值的总和。

比如现在有个样本为：

- Age=37
- TaCA=3.5
- ES="Full Time"

那么对应的信用评分之和就是39+36+38=113

#### 信用评分卡的优势：

1. 信用评分卡每个类别或者分段对应的分数十分清楚明了，有相当强的业务可解释性，对于客户可以解释十分清楚，容易指明信用评分的提升方向和方法。
2. 通过信用评分卡可以计算出一个信用评分的最高值和最低值。
3. 信用评分卡评分相当于就是「违约/正常」的比值的对数，可以设计为评分提高多少，将降低多少倍违约率等等。
4. 信用评分能够反映相应的违约水平，有利于指定信贷政策和相应的成本。

# 2. 评分卡刻度

如何将「违约/正常」的比率映射到对应的分值？

如果将模型对样本预测为违约的概率定为p，而正常的概率就为1-p

那么$odds=\dfrac{p}{1-p}$

那么评分卡的分数score和odds的映射关系一般用线性映射：

$$score=A-B\times log(odds)$$ 

其中A称为补偿，B称为刻度，均为常数。

一般来说，A和B的值都是可以通过特定的score和odds比率来求得。

首先设定比率为$\theta_0$的时候的分数为$P_0$，而对应$2\theta_0$的比率的时候的分数为$P_0+PDO$，那么就可以得到：

$$P_0=A-B\times log(\theta_0)$$

$$P_0+PDO=A-B\times log(2\theta_0)$$

这里就可以计算出A和B的值。



根据逻辑回归模型的公式，

$$log(odds)=log(\dfrac{p}{1-p})=\beta_0+\beta_1x_1+……+\beta_nx_n$$

在对预测变量进行WOE化以后，上面的式子可以变为

$$log(odds)==\beta_0+\beta_1(\delta_{11}w_{11}+\delta_{12}w_{12}+\delta_{13}w_{13})+……+\beta_n(\delta_{n1}w_{n1}+\delta_{n2}w_{n2}+\delta_{n3}w_{n3})$$

代入到score的公式$score=A-B\times log(odds)$

$$score=(A-B\beta_0)-(B\beta_1w_{11})\delta_{11}-……$$

![image-20200208150038416](https://tva1.sinaimg.cn/large/0082zybpgy1gbp0cnv5ofj31140jytbo.jpg)

最终的形式如上，$\delta_{ij}$代表某个变量$x_i$为某个类别j，那么对应激活为1，其他$\delta_{ij}$为0。这样可以得到变量，类别以及对应分值的关系。

![image-20200208150210125](https://tva1.sinaimg.cn/large/0082zybpgy1gbp0cmkv6wj311l0u040r.jpg)



这个评分卡说明了：

1. 基础分值为$A-B\beta_0$
2. 几个重要的参数为刻度$B$，模型参数$\beta_i$，以及woe化以后某个类别的woe值$w_{ij}$。















# 3. 创建评分卡的代码实施

创建评分卡的基本过程包括以下几步：

1. 确定最终进入评分卡的预测变量。
2. 将变量进行woe化和降低基数，为变量的不同类别进行分配相应的数值。模型的截距项作为基本的基础分值。
3. 每个变量的类别或者分段对应相应的分值制成表格。



《评分卡》这本书把制作评分卡概括为以下这个流程：

![image-20200208114932093](https://tva1.sinaimg.cn/large/0082zybpgy1gbp0cq132rj30yy0psjts.jpg)

# 4. 设定临界水平

我们虽然做好了不同变量分数段的分数映射表格，但是如何设定临界点，作为切分的依据，这个需要按照业务要求来，主要根据包括需要的市场规模以及可以承受的违约水平来定，而决定如何对分数进行分类和筛选，称为评分策略。

一般来说，放贷政策越是严格，那么相应的违约水平会越低，但同时市场规模也会越小。



通常来说，设定临界水平有3种方案：

1. 严格的界限。
2. 非严格的界限。
3. 矩阵式设定划分标准。



第一种方式，严格的界限。

一般来说在放贷阶段，会按照分值分为三类，分别是「拒绝」、「人工干预」和「接受」。

![image-20200208115728468](https://tva1.sinaimg.cn/large/0082zybpgy1gbp0cob8foj31000b0t9u.jpg)

一般来说，分数很高或者分数很低的误差都是比较小的，关键在于分数处于中间的人群。这一部分人群往往需要填写更多的资料，引入人工审核，来决定最后是否放贷。



第二种方式，非严格的界限。

这种情况下，往往是引入模型当中没有的变量，按照一定的经验规则在界限上下加分或者减分，比如说年龄这个变量，可以给一个±5分的范围，达到一个模糊界限的效果。



第三种方式，矩阵式设定划分标准。

这种方式会更加复杂，但是现实场景中更多用的是这样的一种筛选方式。也就是风控的实现场景当中，在使用训练好的评分卡之前，先会过一道其他变量的评分，与后面的评分卡进行一种组合评分的效果。而在现实场景中，银行更多不会单一地使用一个评分模型，而是多个评分模型综合使用，做成一个风控的整体策略，在其中还会引入其他规则，或者是其他机构的评分。底下就是一个矩阵策略的示意。



![image-20200208120817801](https://tva1.sinaimg.cn/large/0082zybpgy1gbp0cqpi0bj311y0fmdhd.jpg)

![image-20200208120933572](https://tva1.sinaimg.cn/large/0082zybpgy1gbp0cryoi4j310i0muadf.jpg)